---
- name: Block VLAN 70 to VLAN 80 on FortiGate
  hosts: firewalls
  connection: httpapi
  gather_facts: no

  vars:
    vdom: "root"  # change if you're using a different VDOM

  tasks:
    - name: Create firewall policy to block VLAN 70 to VLAN 80
      fortinet.fortios.fortios_firewall_policy:
        vdom: "{{ vdom }}"
        state: present
        firewall_policy:
          name: "Block_70_to_80"
          policyid: 70
          srcintf:
            - name: "port3"       # change to your source interface
          dstintf:
            - name: "port4"       # change to your destination interface
          srcaddr:
            - name: "subnet70"    # address object for 192.168.70.0/24
          dstaddr:
            - name: "subnet80"    # address object for 192.168.80.0/24
          action: deny
          schedule: always
          service:
            - name: ALL
          logtraffic: all
